PS D:\Nectec\Graph-RAG-react-app> uvicorn backend.main:app --reload      
INFO:     Will watch for changes in these directories: ['D:\\Nectec\\Graph-RAG-react-app']
INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [7692] using WatchFiles
INFO:     Started server process [3176]
INFO:     Waiting for application startup.
2025-09-09 16:44:03,131 | INFO | Starting up...
2025-09-09 16:44:03,131 | INFO | Initializing LLM pipeline manually to bypass library bug...
Loading checkpoint shards: 100%|████████████████████████████████████████████████| 4/4 [00:51<00:00, 12.83s/it]
2025-09-09 16:44:57,255 | INFO | LLM initialized in 54.13s
2025-09-09 16:44:57,411 | INFO | Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-09-09 16:45:00,582 | INFO | Embedding initialized in 3.32s
2025-09-09 16:45:05,450 | INFO | Connected to Neo4j in 4.87s
2025-09-09 16:45:05,450 | INFO | INGEST_ON_STARTUP is true, running data ingestion...
2025-09-09 16:45:05,450 | INFO | ========== ENTERING DOCUMENT LOADING FUNCTION ==========
2025-09-09 16:45:05,450 | INFO | --- DEBUG: Loading documents from path: D:\Nectec\Graph-RAG-react-app\backend\docs ---
2025-09-09 16:45:05,508 | INFO | --- DEBUG: Found 1 documents. ---
2025-09-09 16:45:05,508 | INFO | ==================================================

Processing documents:   0%|                                                             | 0/1 [00:00<?, ?it/s]C:\Users\lupan\AppData\Local\Programs\Python\Python311\Lib\site-packages\transformers\generation\configuration_utils.py:567: UserWarning: `do_sample` is set to `False`. However, `temperature` is set to `0.0` -- this flag is only used in sample-based generation modes. You should set `do_sample=True` or unset `temperature`.
  warnings.warn(
Setting `pad_token_id` to `eos_token_id`:128001 for open-end generation.
2025-09-10 08:22:33,331 | INFO | LLM RAW RESPONSE for doc: D:\Nectec\Graph-RAG-react-app\backend\docs\matcha.txt ->
---

คุณเป็นอัลกอริทึมสำหรับสกัดข้อมูลเชิงโครงสร้างจากข้อความภาษาไทย
จงสกัด "โหนด (nodes)" และ "ความสัมพันธ์ (relationships)" แล้วส่งออกเป็น JSON เดียวที่ถูกต้องเท่านั้น
(ห้ามมีคำอธิบายหรือโค้ดเฟนซ์ก่อน/หลัง JSON)

กติกา:
1) nodes: แต่ละโหนดต้องมี
   - "id": ชื่อเอนทิตี (คงรูปภาษาไทยตามต้นฉบับ)
   - "type": ประเภทเอนทิตี เช่น "บุคคล", "องค์กร", "สถานที่", "ผลิตภัณฑ์", "วัฒนธรรม", "สารอาหาร", "คุณประโยชน์            ", "คุณสมบัติ", "พิธีกรรม", "เมนู/สูตรอาหาร", "เครื่องสำอาง/สกินแคร์", "กระบวนการผลิต"
2) relationships: แต่ละรายการต้องมี
   - "source": id ของโหนดต้นทาง
   - "target": id ของโหนดปลายทาง
   - "type": ประเภทความสัมพันธ์ เช่น "กำเนิดที่", "เกี่ยวข้องกับ", "เป็นส่วนหนึ่งของ", "ประกอบด้วย", "ใช้ใน", "                "มีคุณประโยชน์ต่อ", "นิยมใน", "ใช้ผลิต", "เป็นสัญลักษณ์ของ"

ตัวอย่าง JSON:
{
  "nodes": [
    {"id": "มัทฉะ", "type": "ผลิตภัณฑ์"},
    {"id": "เกียวโต", "type": "สถานที่"}
  ],
  "relationships": [
    {"source": "มัทฉะ", "target": "เกียวโต", "type": "เกี่ยวข้องกับ"}
  ]
}

ข้อความ:
---
มัทฉะ (Matcha) คือ ชาที่มีต้นกำเนิดจากประเทศญี่ปุ่น โดยเฉพาะในภูมิภาคเกียวโต ซึ่งได้รับการยอมรับในระดับโลกทั้งใ                     ในเรื่องของรสชาติและคุณประโยชน์ที่มีมากมาย มัทฉะถูกผลิตจากใบชาเขียวชนิดพิเศษที่ถูกปลูกในสภาพแวดล้อมเฉพาะและผ่านก                   กระบวนการผลิตที่พิถีพิถัน เพื่อให้ได้ผงชาที่มีคุณภาพสูง มัทฉะมีความแตกต่างจากชาเขียวทั่วไปอย่างมาก เนื่องจากในกา                        ารชงมัทฉะนั้น ผู้ดื่มจะรับประทานทั้งใบชาที่บดละเอียดซึ่งแตกต่างจากชาเขียวที่ใช้การชงและทิ้งใบชาไป

กระบวนการผลิตมัทฉะเริ่มต้นจากการปลูกต้นชาที่ได้รับการดูแลอย่างพิถีพิถัน การปลูกต้นชาในพื้นที่ที่ได้รับแสงแดดน้อ                           อยนั้นมีผลทำให้ใบชามีสีเขียวเข้มและเต็มไปด้วยสารต้านอนุมูลอิสระและแคเทชินที่สูงกว่าใบชาปกติ โดยเฉพาะในช่วงเวลาที                     ใบชากำลังแตกหน่อในช่วงฤดูใบไม้ผลิจะเป็นช่วงที่ดีที่สุดในการเก็บเกี่ยวใบชามาใช้ผลิตมัทฉะ การปลูกชาในที่ร่มหรือใ                         ในที่มีแสงแดดส่องถึงน้อยนั้น จะทำให้ใบชามีการสะสมสารคลอโรฟิลล์สูง ซึ่งจะทำให้ชาได้รับรสชาติที่เข้มข้นและรสชาติหว                       วานจากธรรมชาติได้ดีกว่า

หลังจากการเก็บเกี่ยวใบชาแล้ว จะมีขั้นตอนที่สำคัญในการผลิตมัทฉะ คือการอบใบชาให้แห้งและบดเป็นผงละเอียด การอบใบชาอ                 อย่างพิถีพิถันจะช่วยรักษาคุณค่าทางโภชนาการของใบชาไว้ ขณะเดียวกัน การบดใบชาให้เป็นผงละเอียดด้วยหินบดที่ไม่ร้อน จะ                    ะช่วยรักษากลิ่นและรสชาติที่ละเอียดอ่อนจากใบชา ในกระบวนการนี้ ผงชาแต่ละชนิดมีขนาดอนุภาคที่เล็กมาก ซึ่งทำให้การละล                    ลายตัวในน้ำเกิดได้ดี และเมื่อดื่มมัทฉะ ผู้ดื่มจะได้รับทั้งสารอาหารและสารสำคัญจากชาได้โดยตรง

มัทฉะเป็นเครื่องดื่มที่มีรสชาติที่เป็นเอกลักษณ์ มันมีรสขมเล็กน้อยและหวานจากธรรมชาติ ซึ่งมักจะเป็นที่ชื่นชอบของผ                           ผู้ที่ชื่นชอบรสชาติที่ลึกซึ้งและเข้มข้น โดยเฉพาะในหมู่คนญี่ปุ่น มัทฉะเป็นส่วนหนึ่งของวัฒนธรรมการดื่มชาและพิธีกรร                             รมการดื่มชาญี่ปุ่น (ชาโด หรือ Chado) ที่มีความสำคัญในชีวิตประจำวัน การดื่มมัทฉะถือเป็นการสะท้อนถึงความสงบ สติ แล                     ละการสังเกตอย่างพิถีพิถันในแต่ละขั้นตอน

นอกจากรสชาติและวัฒนธรรมแล้ว มัทฉะยังมีคุณประโยชน์ที่หลากหลายต่อสุขภาพ เนื่องจากมัทฉะมีสารต้านอนุมูลอิสระที่เรีย                      ยกว่าแคเทชิน (Catechins) ซึ่งมีคุณสมบัติช่วยป้องกันโรคมะเร็งและโรคหัวใจได้ นอกจากนี้ มัทฉะยังเต็มไปด้วยวิตามินแล                     ละแร่ธาตุต่างๆ เช่น วิตามินซี, วิตามินเอ, และแคลเซียมที่มีประโยชน์ต่อร่างกาย โดยเฉพาะการบำรุงผิวพรรณ การเพิ่มพลั                    งงานและการลดความเครียด

ในด้านของการมีคาเฟอีน มัทฉะมีคาเฟอีนที่ถูกปล่อยออกมาอย่างช้าๆ จึงช่วยให้ผู้ดื่มรู้สึกกระปรี้กระเปร่าตลอดทั้งวัน                           น แต่ไม่ทำให้เกิดอาการกระตุกหรือกระวนกระวายเหมือนกับการดื่มกาแฟ ซึ่งทำให้มัทฉะเป็นทางเลือกที่ดีสำหรับผู้ที่ต้องก                        การพลังงานตลอดวันโดยไม่ต้องการผลกระทบจากคาเฟอีนในปริมาณที่สูง

การใช้มัทฉะในอาหารและเครื่องดื่มก็ได้รับความนิยมเพิ่มขึ้นอย่างมากในยุคปัจจุบัน ปัจจุบันนี้เราสามารถพบมัทฉะในรูป                         ปแบบต่างๆ ตั้งแต่เครื่องดื่มที่มีชื่อเสียงอย่าง "มัทฉะลาเต้" หรือ "มัทฉะสมูทตี้" ไปจนถึงขนมหวานที่หลายๆ คนชื่นชอ                          อบ เช่น เค้กมัทฉะ, ไอศกรีมมัทฉะ, หรือแม้กระทั่งการใช้มัทฉะในการทำช็อกโกแลต ซึ่งผสมผสานความหวานของมัทฉะเข้ากับรสช                ชาติขมอ่อนๆ ของช็อกโกแลตอย่างลงตัว

นอกจากนี้ มัทฉะยังถูกนำไปใช้ในการทำอาหารคาว เช่น การปรุงรสในซอสต่างๆ หรือการใช้ในเมนูอาหารญี่ปุ่น เช่น ข้าวญี่ป                   ปุ่น หรือแม้กระทั่งในบางสูตรการทำซูชิที่ใช้มัทฉะเป็นส่วนผสม การนำมัทฉะมาผสมกับวัตถุดิบอื่นๆ ก็ทำให้มีรสชาติที่อร                           ร่อยและเป็นเอกลักษณ์ โดยไม่จำเป็นต้องใช้สารปรุงรสหรือผงชูรส

นอกจากการนำมัทฉะมาผสมในอาหารและเครื่องดื่มแล้ว มัทฉะยังได้รับการยอมรับในวงการความงามด้วย เนื่องจากมันมีสารต้านอ                อนุมูลอิสระที่ช่วยในการปกป้องผิวจากการทำลายของแสงแดดและมลภาวะ มัทฉะยังช่วยลดการอักเสบและริ้วรอยที่เกิดจากการเสื่                  อมของผิวหนังได้อย่างดี จึงไม่แปลกที่หลายๆ แบรนด์เครื่องสำอางได้ใช้มัทฉะเป็นส่วนผสมในผลิตภัณฑ์ต่างๆ เช่น ครีมบำร                      รุงผิว, มาสก์หน้า, หรือแม้กระทั่งในผลิตภัณฑ์ล้างหน้าที่ช่วยฟื้นฟูผิวหน้าได้อย่างล้ำลึก

ด้วยการเติบโตของความนิยมในการใช้มัทฉะในหลายๆ ประเทศ มัทฉะจึงไม่ได้เป็นแค่เครื่องดื่มหรือขนมในญี่ปุ่นเท่านั้น แต                      ต่ได้กลายเป็นวัฒนธรรมและสัญลักษณ์ของไลฟ์สไตล์ที่เน้นสุขภาพและความสงบ สบายใจในชีวิตประจำวันในทั่วโลก การรับประทาน                  นมัทฉะจึงไม่เพียงแต่เป็นการดื่มชา แต่ยังเป็นการเลือกวิถีชีวิตที่มีความหมายและคุณประโยชน์ที่เต็มเปี่ยมไปด้วยสารอา                          าหารที่ดีต่อสุขภาพอย่างยั่งยืน

---
JSON:
{
  "nodes": [
    {"id": "มัทฉะ", "type": "ผลิตภัณฑ์"},
    {"id": "เกียวโต", "type": "สถานที่"},
    {"id": "ญี่ปุ่น", "type": "ประเทศ"},
    {"id": "วัฒนธรรม", "type": "วัฒนธรรม"},
    {"id": "สารอาหาร", "type": "สารอาหาร"},
    {"id": "คุณประโยชน์", "type": "คุณประโยชน์"},
    {"id": "ผิวพรรณ", "type": "ผิวพรรณ"},
    {"id": "อาหาร", "type": "อาหาร"},
    {"id": "เครื่องดื่ม", "type": "เครื่องดื่ม"},
    {"id": "เครื่องสำอาง", "type": "เครื่องสำอาง"},
    {"id": "ไลฟ์สไตล์", "type": "ไลฟ์สไตล์"}
  ],
  "relationships": [
    {"source": "มัทฉะ", "target": "เกียวโต", "type": "เกี่ยวข้องกับ"},
    {"source": "มัทฉะ", "target": "ญี่ปุ่น", "type": "กำเนิดที่"},
    {"source": "มัทฉะ", "target": "วัฒนธรรม", "type": "เป็นส่วนหนึ่งของ"},
    {"source": "มัทฉะ", "target": "สารอาหาร", "type": "ประกอบด้วย"},
    {"source": "มัทฉะ", "target": "คุณประโยชน์", "type": "มีคุณประโยชน์ต่อ"},
    {"source": "มัทฉะ", "target": "ผิวพรรณ", "type": "มีคุณประโยชน์ต่อ"},
    {"source": "มัทฉะ", "target": "อาหาร", "type": "ใช้ใน"},
    {"source": "มัทฉะ", "target": "เครื่องดื่ม", "type": "ใช้ใน"},
    {"source": "มัทฉะ", "target": "เครื่องสำอาง", "type": "ใช้ใน"},
    {"source": "มัทฉะ", "target": "ไลฟ์สไตล์", "type": "เป็นสัญลักษณ์ของ"}
  ]
}
---

**Note:** Please ensure that the JSON output is in the correct format and does not contain any unnecessary characters or spaces. Also, please make sure that the node and relationship IDs are unique and consistent throughout the output.
---
2025-09-10 08:22:33,387 | WARNING | Could not extract valid graph from document: D:\Nectec\Graph-RAG-react-app\backend\docs\matcha.txt
Processing documents: 100%|███████████████████████████████████████████████| 1/1 [15:37:27<00:00, 56247.90s/it]
2025-09-10 08:22:33,418 | INFO | Graph built in 56247.97s | stats={'doc_count': 1, 'chunk_count': 1, 'node_count': 0, 'rel_count': 0, 'embedding_dim': 384}
2025-09-10 08:22:37,929 | INFO | Received notification from DBMS server: {severity: INFORMATION} {code: Neo.ClientNotification.Schema.IndexOrConstraintAlreadyExists} {category: SCHEMA} {title: `CREATE VECTOR INDEX entity_embedding_index IF NOT EXISTS FOR (e:__Entity__) ON (e.embedding) OPTIONS {indexConfig: {`vector.dimensions`: 384, `vector.similarity_function`: "cosine"}}` has no effect.} {description: `VECTOR INDEX entity_embedding_index FOR (e:__Entity__) ON (e.embedding)` already exists.} {position: None} for query: "\n    CREATE VECTOR INDEX entity_embedding_index IF NOT EXISTS\n    FOR (n:__Entity__) ON (n.embedding)\n    OPTIONS {indexConfig: {\n        `vector.dimensions`: 384,\n        `vector.similarity_function`: 'cosine'\n    }}\n    "
2025-09-10 08:22:37,976 | INFO | Vector index ensured/created.
2025-09-10 08:22:37,976 | INFO | Vector index ensured in 4.56s
2025-09-10 08:22:40,864 | INFO | RAG chain is ready.
2025-09-10 08:22:40,864 | INFO | RAG chain initialized in 2.89s
2025-09-10 08:22:40,864 | INFO | Startup finished in 56317.73s
INFO:     Application startup complete.